#! /usr/bin/env perl
#
# Short description for cg.pl
#
# Author josephzeng <josephzeng36@gmail.com>
# Version 0.1
# Copyright (C) 2017 josephzeng <josephzeng36@gmail.com>
# Modified On 2017-07-07 14:38
# Created  2017-07-07 14:38
#
use strict;
use warnings;

use AnyEvent;
use AnyEvent::Handle;
use Data::Dumper;

use v5.20.2;

my $cv = AnyEvent->condvar;
my $hdl; $hdl = AnyEvent::Handle->new(
    connect => ['192.168.200.73', 9840],
    keepalive => 1,
    on_connect => sub {
        say "connect ok";
    },
    on_connect_error => sub{
        say "could not connect\n";
        $hdl->destroy;
    },
    on_error => sub{
        $hdl->destroy;
    },
    on_eof => sub{
        $hdl->destroy;
    },
    on_read => {
        my ($self) = @_;
        print Dumper \$self;
    },
);
$cv->recv;



